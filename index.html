<!DOCTYPE html>
<html class="">
<head>
<meta charset=utf-8 />
<title>Furatto :: Basic Setup</title>
<link rel="stylesheet" href="furatto/examples/assets/css/normalize.css" />
<link rel="stylesheet" href="furatto/examples/assets/css/furatto.css" />
<link rel="stylesheet" href="furatto/examples/assets/css/font-awesome.css" />
<link rel="stylesheet" href="furatto/examples/assets/css/docs.css" />
<link rel="stylesheet" href="furatto/examples/assets/css/examples.css" />
<link rel="stylesheet" href="css/style.css" />
<link rel="shortcut icon" href="furatto/examples/assets/img/favicon.ico" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&v=3.8"></script>
<link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
<link rel="stylesheet" type="text/css" href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" />
<script src="http://code.jquery.com/jquery.js"></script>
<script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>    
<!-- INFOWINDOW TEMPLATES -->
<script type="infowindow/html" id="infowindow_template">
    <div class="cartodb-popup" id="infowindow">
      <a href="#close" class="cartodb-popup-close-button close">x</a>
       <div class="cartodb-popup-content-wrapper" >
         <div class="cartodb-popup-header"> </div>
         <div class="cartodb-popup-content" > </div>
        </div>
       <div class="cartodb-popup-tip-container" ></div>
    </div>
</script>
    
<script type="text/javascript">
  /* CONFIGURATIONS */
  var sql = new cartodb.SQL({ user: 'sedemty' });
  var layerUrl = "http://sedemty.cartodb.com/api/v1/viz/remesas_por_estado/viz.json";
  var table_name = "remesas_por_estado";
  var _query = "";
  var _interactivity = "cartodb_id,state,y_2003,y_2004,y_2005,y_2006,y_2007,y_2008,y_2009,y_2010,y_2011,the_geom_webmercator";
  var layers = [];
  var style_2003 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2003<=1787]{marker-width:25.0;}#remesas_por_estado[y_2003<=1106]{marker-width:23.3;}#remesas_por_estado[y_2003<=854]{marker-width:21.7;}#remesas_por_estado[y_2003<=608]{marker-width:20.0;}#remesas_por_estado[y_2003<=402]{marker-width:18.3;}#remesas_por_estado[y_2003<=283]{marker-width:16.7;}#remesas_por_estado[y_2003<=234]{marker-width:15.0;}#remesas_por_estado[y_2003<=149]{marker-width:13.3;}#remesas_por_estado[y_2003<=128]{marker-width:11.7;}#remesas_por_estado[y_2003<=60]{marker-width:10.0;}";
    var style_2004 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2004<=1787]{marker-width:25.0;}#remesas_por_estado[y_2004<=1106]{marker-width:23.3;}#remesas_por_estado[y_2004<=854]{marker-width:21.7;}#remesas_por_estado[y_2004<=608]{marker-width:20.0;}#remesas_por_estado[y_2004<=402]{marker-width:18.3;}#remesas_por_estado[y_2004<=283]{marker-width:16.7;}#remesas_por_estado[y_2004<=234]{marker-width:15.0;}#remesas_por_estado[y_2004<=149]{marker-width:13.3;}#remesas_por_estado[y_2004<=128]{marker-width:11.7;}#remesas_por_estado[y_2004<=60]{marker-width:10.0;}";
    var style_2005 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2005<=1787]{marker-width:25.0;}#remesas_por_estado[y_2005<=1106]{marker-width:23.3;}#remesas_por_estado[y_2005<=854]{marker-width:21.7;}#remesas_por_estado[y_2005<=608]{marker-width:20.0;}#remesas_por_estado[y_2005<=402]{marker-width:18.3;}#remesas_por_estado[y_2005<=283]{marker-width:16.7;}#remesas_por_estado[y_2005<=234]{marker-width:15.0;}#remesas_por_estado[y_2005<=149]{marker-width:13.3;}#remesas_por_estado[y_2005<=128]{marker-width:11.7;}#remesas_por_estado[y_2005<=60]{marker-width:10.0;}";
    var style_2006 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2006<=1787]{marker-width:25.0;}#remesas_por_estado[y_2006<=1106]{marker-width:23.3;}#remesas_por_estado[y_2006<=854]{marker-width:21.7;}#remesas_por_estado[y_2006<=608]{marker-width:20.0;}#remesas_por_estado[y_2006<=402]{marker-width:18.3;}#remesas_por_estado[y_2006<=283]{marker-width:16.7;}#remesas_por_estado[y_2006<=234]{marker-width:15.0;}#remesas_por_estado[y_2006<=149]{marker-width:13.3;}#remesas_por_estado[y_2006<=128]{marker-width:11.7;}#remesas_por_estado[y_2006<=60]{marker-width:10.0;}";
    var style_2007 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2007<=1787]{marker-width:25.0;}#remesas_por_estado[y_2007<=1106]{marker-width:23.3;}#remesas_por_estado[y_2007<=854]{marker-width:21.7;}#remesas_por_estado[y_2007<=608]{marker-width:20.0;}#remesas_por_estado[y_2007<=402]{marker-width:18.3;}#remesas_por_estado[y_2007<=283]{marker-width:16.7;}#remesas_por_estado[y_2007<=234]{marker-width:15.0;}#remesas_por_estado[y_2007<=149]{marker-width:13.3;}#remesas_por_estado[y_2007<=128]{marker-width:11.7;}#remesas_por_estado[y_2007<=60]{marker-width:10.0;}";
    var style_2008 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2008<=1787]{marker-width:25.0;}#remesas_por_estado[y_2008<=1106]{marker-width:23.3;}#remesas_por_estado[y_2008<=854]{marker-width:21.7;}#remesas_por_estado[y_2008<=608]{marker-width:20.0;}#remesas_por_estado[y_2008<=402]{marker-width:18.3;}#remesas_por_estado[y_2008<=283]{marker-width:16.7;}#remesas_por_estado[y_2008<=234]{marker-width:15.0;}#remesas_por_estado[y_2008<=149]{marker-width:13.3;}#remesas_por_estado[y_2008<=128]{marker-width:11.7;}#remesas_por_estado[y_2008<=60]{marker-width:10.0;}";
    var style_2009 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2009<=1787]{marker-width:25.0;}#remesas_por_estado[y_2009<=1106]{marker-width:23.3;}#remesas_por_estado[y_2009<=854]{marker-width:21.7;}#remesas_por_estado[y_2009<=608]{marker-width:20.0;}#remesas_por_estado[y_2009<=402]{marker-width:18.3;}#remesas_por_estado[y_2009<=283]{marker-width:16.7;}#remesas_por_estado[y_2009<=234]{marker-width:15.0;}#remesas_por_estado[y_2009<=149]{marker-width:13.3;}#remesas_por_estado[y_2009<=128]{marker-width:11.7;}#remesas_por_estado[y_2009<=60]{marker-width:10.0;}";
    var style_2010 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2010<=1787]{marker-width:25.0;}#remesas_por_estado[y_2010<=1106]{marker-width:23.3;}#remesas_por_estado[y_2010<=854]{marker-width:21.7;}#remesas_por_estado[y_2010<=608]{marker-width:20.0;}#remesas_por_estado[y_2010<=402]{marker-width:18.3;}#remesas_por_estado[y_2010<=283]{marker-width:16.7;}#remesas_por_estado[y_2010<=234]{marker-width:15.0;}#remesas_por_estado[y_2010<=149]{marker-width:13.3;}#remesas_por_estado[y_2010<=128]{marker-width:11.7;}#remesas_por_estado[y_2010<=60]{marker-width:10.0;}";
    var style_2011 = "#remesas_por_estado{marker-fill:#0F3B82;marker-line-color:#FFF;marker-line-width:2;marker-line-opacity:1;marker-opacity:0.9;marker-placement:point;marker-type:ellipse;marker-allow-overlap:true;marker-clip:false;marker-multi-policy:largest;}#remesas_por_estado[y_2011<=1787]{marker-width:25.0;}#remesas_por_estado[y_2011<=1106]{marker-width:23.3;}#remesas_por_estado[y_2011<=854]{marker-width:21.7;}#remesas_por_estado[y_2011<=608]{marker-width:20.0;}#remesas_por_estado[y_2011<=402]{marker-width:18.3;}#remesas_por_estado[y_2011<=283]{marker-width:16.7;}#remesas_por_estado[y_2011<=234]{marker-width:15.0;}#remesas_por_estado[y_2011<=149]{marker-width:13.3;}#remesas_por_estado[y_2011<=128]{marker-width:11.7;}#remesas_por_estado[y_2011<=60]{marker-width:10.0;}";
    
    /*   MAPS METHODS  */
	google.maps.event.addDomListener(window,'load', init);
	google.maps.visualRefresh = true;
	function init(){
		var styler = [];
		var styleMap = new google.maps.StyledMapType(styler,{name: "Mapa"});	
		var mapDiv = document.getElementById('map');
		/*  MAP  */
		map = new google.maps.Map(mapDiv, {
			center: new google.maps.LatLng(26.16, -102),
			zoom: 5,
			maxZoom: 17,
			minZoom:5,
			zoomControl: true,
			zoomControlOptions: {
				style: google.maps.ZoomControlStyle.DEFAULT	
			},
			mapTypeControlOptions: { mapTypeIds: [google.maps.MapTypeId.SATELLITE, 'style_'],
									  style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
			},
			mapTypeControl: false,
			scrollwheel: true,
			streetViewControl: true,
			panControl:true,
			backgroundColor: '#000000',
			rotateControl:true,
		});
		map.mapTypes.set('style_', styleMap);
		map.setMapTypeId('style_');
		google.maps.event.addListener(map, 'click', function(event) {
	        
		});
	    		
		 
		/* CARTO */
		var layerOptions = {query: _query, interactivity: _interactivity, tile_style: style_2003};
		cartodb.createLayer(map, layerUrl, layerOptions)
			.on('done', function(layer) {
					map.overlayMapTypes.setAt(0, layer);
					layers.push(layer);
					layer.on('featureClick', function(e, latlng, pos, data) {});
            }).on('error', function() {
					window.location.reload();
		});
	    
        /* var n="SELECT * FROM "+table_name;
            sql.execute(n).done(function(data) {
            
                layer.infowindow.set('template', $('#infowindow_template').html());
                
            }).error(function(errors) {});
       });*/

	}
    $(function() {
       //initial triggers...
    });
    
    function updateMap(val){
        var style = getStyle(val);
        layers[0].setOptions({tile_style: style}); 
    }
    
    function getStyle(val){
        switch (val){
            case '2003': console.log(val); return style_2003;
            case '2004': console.log(val); return style_2004;
            case '2005': console.log(val); return style_2005;
            case '2006': console.log(val); return style_2006;
            case '2007': console.log(val); return style_2007;
            case '2008': console.log(val); return style_2008;
            case '2009': console.log(val); return style_2009;
            case '2010': console.log(val); return style_2010;
            case '2011': console.log(val); return style_2011;
            default:break;
        }
    }
</script>
    
    

</head>
<body>

<div class="panels ">
  <div class="panel panel-left">
  </div>
</div>

<div class="panel-content">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner docs-navbar-inner">
      <div class="container">
        <a href="#menu" class="menu-trigger meteocon" data-meteocon="M" data-toggle="panel" data-target="#menu"></a>
        <div class="nav-collapse collapse">
          <nav id="menu">
            <ul class="nav docs-navbar-menu">
              <li><a class="brand" href="index.html">Project Name</a></li>
              <li class="active"><a href="#">About</a></li>
              <li class=""><a href="#">Contact</a></li>
              <li class=""><input type="range" name="points" min="2003" max="2011" value="2003" class="rangeinput" onchange="updateMap(this.value);"></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div id="map" style="width:100%;height:100%"></div> 
</div>



<script src="furatto/examples/assets/js/jquery.js"></script>
<script src="furatto/examples/assets/js/furatto.min.js"></script>
</body>
</html>
